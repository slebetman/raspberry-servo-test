<html>
	<head>
		<link rel="stylesheet" href="cam.css">
	</head>
	<body>
		<div id="settings-container">
			Settings:
			<div id="settings"></div>
			Update settings:
			<div id="update">
				<select id="key">
					<option value="width">width</option>
					<option value="height">height</option>
					<option value="bitrate">bitrate</option>
					<option value="framerate">framerate</option>
					<option value="brightness">brightness</option>
					<option value="contrast">contrast</option>
				</select>
				<input type="text" id="val">
				<button id="update-btn">Update</button>
			</div>
		</div>
		<div id="slider-container">
			<img id="livecam" src="" width="768" height="576">
			<input
				id="slider" 
				type="range" 
				min="-100" 
				max="100" 
				value="0" 
				step="0.5"
				orient="vertical"
			>
			<div id="live">0</div>
		</div>
		<script>
			function get (id) {
				return document.getElementById(id);
			}
			
			let host = "http://" + window.location.hostname;
			
			get('livecam').src = host  + ":8866/";
			
			fetch(host + ':8877/cam/settings')
				.then(res => res.json())
				.then(json => {
					get('settings').innerHTML = JSON.stringify(json, null, 4); 
				});
				
			get('update-btn').onclick = function () {
				let setting = get('key').value;
				let value = get('val').value;
				
				fetch(host + ':8877/cam/set?setting=' + setting + '&value=' + value);
			}
		</script>		
		<script src="slider-control.js"></script>
	</body>
</html>